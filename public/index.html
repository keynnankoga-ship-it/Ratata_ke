<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Ratata Store</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
/* === GLOBAL === */
body{
  margin:0;
  background:#0a0a0a;
  color:white;
  font-family:Georgia,serif;
  overflow-x:hidden;
}
h1,h2,h3{margin:0 0 15px}
img{max-width:100%}
.btn{
  background:#ff7a2f;
  padding:12px 25px;
  border:none;
  color:white;
  font-weight:bold;
  cursor:pointer;
  border-radius:6px;
}

/* === NAVIGATION === */
nav{
  display:flex;
  justify-content:space-between;
  align-items:center;
  padding:20px 50px;
  background:#111;
  position:sticky;
  top:0;
  z-index:1000;
}
nav h2{margin:0;color:#ff7a2f;}
nav ul{
  display:flex;
  list-style:none;
  margin:0;
  padding:0;
}
nav ul li{
  margin-left:25px;
}
nav ul li a{
  color:white;
  text-decoration:none;
  font-weight:bold;
  cursor:pointer;
}
nav ul li a:hover{
  color:#ff7a2f;
}

/* === HERO === */
.hero{
  display:flex;
  align-items:center;
  justify-content:space-between;
  padding:80px;
  min-height:80vh;
}
.left{max-width:50%}
h1{font-size:60px}

/* === PRODUCTS === */
.products{
  padding:80px 8%;
  background:#111;
  text-align:center;
}
.product-grid{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(250px,1fr));
  gap:30px;
  margin-top:40px;
}
.card{
  background:#1a1a1a;
  padding:20px;
  border-radius:12px;
}
.card img{
  border-radius:10px;
  margin-bottom:10px;
}
.price{
  color:#ff7a2f;
  font-weight:bold;
  margin:10px 0;
}

/* === CART MODAL === */
#cart-modal{
  position:fixed;
  top:0; left:0;
  width:100%; height:100%;
  background:rgba(0,0,0,0.9);
  display:none;
  flex-direction:column;
  align-items:center;
  justify-content:flex-start;
  padding:50px 20px;
  z-index:2000;
  overflow-y:auto;
}
#cart-modal h2{text-align:center;margin-bottom:20px;}
.cart-item{
  display:flex;
  justify-content:space-between;
  align-items:center;
  margin:10px 0;
  background:#1a1a1a;
  padding:10px;
  border-radius:6px;
}
.cart-item input{
  width:50px;
  margin-left:10px;
  padding:5px;
  border-radius:6px;
  border:none;
}
#cart-total{
  font-size:22px;
  color:#ff7a2f;
  margin-top:20px;
}
.close-cart{
  background:#ff7a2f;
  padding:10px 20px;
  border:none;
  color:white;
  font-weight:bold;
  cursor:pointer;
  border-radius:6px;
  margin-bottom:20px;
}

/* === PAYMENT MODAL === */
#payment-modal{
  position:fixed;
  top:0; left:0;
  width:100%; height:100%;
  background:rgba(0,0,0,0.95);
  display:none;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  padding:50px 20px;
  z-index:3000;
  overflow-y:auto;
}
.payment-card{
  max-width:400px;
  width:100%;
  background:#111;
  padding:40px;
  border-radius:12px;
  text-align:center;
}
.payment-card input{
  width:100%;
  padding:12px;
  margin:10px 0;
  border:none;
  border-radius:6px;
}
#mpesa-response, #payment-response{
  margin-top:10px;
  color:#ff7a2f;
}

/* === GALLERY === */
.gallery{
  padding:80px 8%;
  text-align:center;
}
.gallery-grid{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(250px,1fr));
  gap:20px;
  margin-top:30px;
}
.gallery img, .gallery video{
  width:100%;
  border-radius:12px;
}

/* === CONTACT === */
.contact{
  padding:80px 20px;
  background:#111;
  text-align:center;
}
.contact a{color:#ff7a2f;text-decoration:none;margin:0 10px;font-weight:bold;}

/* === FOOTER === */
footer{
  background:#111;
  color:white;
  text-align:center;
  padding:20px;
  font-size:14px;
  margin-top:40px;
}

@media(max-width:900px){
  .hero{flex-direction:column;text-align:center}
  .left{max-width:100%}
  nav ul{flex-direction:column}
  nav ul li{margin:10px 0}
}
</style>

<script src="https://js.stripe.com/v3/"></script>
</head>
<body>

<!-- NAVIGATION -->
<nav>
  <h2>Ratata</h2>
  <ul>
    <li><a onclick="scrollToHome()">Home</a></li>
    <li><a onclick="scrollToProducts()">Menu</a></li>
    <li><a onclick="scrollToContact()">Contact</a></li>
    <li><a onclick="openCart()">Cart</a></li>
  </ul>
</nav>

<!-- HERO -->
<section id="home" class="hero">
  <div class="left">
    <h1>Experience the<br>Power of Ratata</h1>
    <p>One Drink, Three Souls</p>
    <button class="btn" onclick="scrollToProducts()">Shop Now</button>
  </div>
  <div>
    <img src="images/icon1.jpg">
  </div>
</section>

<!-- PRODUCTS -->
<section id="products" class="products">
  <h2>Our Menu</h2>
  <div class="product-grid">
    <div class="card">
      <img src="images/icon2.jpg">
      <h3>Ratata Original 1Litre</h3>
      <div class="price">KSh 700</div>
      <button class="btn" onclick="addToCart('Ratata Original 1Litre',700)">Add to Cart</button>
    </div>
    <div class="card">
      <img src="images/icon3.jpg">
      <h3>Ratata Original 2Litres</h3>
      <div class="price">KSh 1350</div>
      <button class="btn" onclick="addToCart('Ratata Original 2Litres',1350)">Add to Cart</button>
    </div>
    <div class="card">
      <img src="images/dessert.jpg">
      <h3>Ratata Original 5Litres</h3>
      <div class="price">KSh 3000</div>
      <button class="btn" onclick="addToCart('Ratata Original 5Litres',3000)">Add to Cart</button>
    </div>
  <div class="card">
      <img src="images/icon4.jpg">
      <h3>Ratata Pineapple-Ginger 1Ltr</h3>
      <div class="price">KSh 800</div>
      <button class="btn" onclick="addToCart('Ratata Pineapple-Ginger 1Ltr',800)">Add to Cart</button>
    </div>
<div class="card">
      <img src="images/icon5.jpg">
      <h3>Ratata Pineapple-Ginger 2Ltrs</h3>
      <div class="price">KSh 1450</div>
      <button class="btn" onclick="addToCart('Ratata Pineapple-Ginger 2Ltrs',1450)">Add to Cart</button>
    </div>
<div class="card">
      <img src="images/icon6.jpg">
      <h3>Ratata Pineapple-Ginger 5Ltrs</h3>
      <div class="price">KSh 3200</div>
      <button class="btn" onclick="addToCart('Ratata Pineapple-Ginger 5Ltrs',3200)">Add to Cart</button>
    </div>
<div class="card">
      <img src="images/icon7.jpg">
      <h3>Ratata T-Shirt(White)</h3>
      <div class="price">KSh 1000</div>
      <button class="btn" onclick="addToCart('Ratata T-Shirt(White)',1000)">Add to Cart</button>
    </div>
<div class="card">
      <img src="images/icon8.jpg">
      <h3>Ratata T-Shirt(Black)</h3>
      <div class="price">KSh 1000</div>
      <button class="btn" onclick="addToCart('Ratata T-Shirt(Black)',1000)">Add to Cart</button>
    </div>
<div class="card">
      <img src="images/icon9.jpg">
      <h3>Ratata T-Shirt(Pink)</h3>
      <div class="price">KSh 1000</div>
      <button class="btn" onclick="addToCart('Ratata T-Shirt(Pink)',1000)">Add to Cart</button>
    </div>

  </div>
</section>

<!-- CART MODAL -->
<div id="cart-modal">
  <button class="close-cart btn" onclick="closeCart()">Close Cart</button>
  <h2>Your Cart</h2>
  <div id="cart-items"></div>
  <div class="total">Total: KSh <span id="cart-total">0</span></div>
  <button class="btn" onclick="openPayment()">Checkout</button>
</div>

<!-- PAYMENT MODAL -->
<div id="payment-modal">
  <div class="payment-card">
    <h2>Payment</h2>
    <p>Total: KSh <span id="payment-total">0</span></p>
    
    <!-- M-Pesa -->
    <input type="text" id="mpesa-phone" placeholder="2547XXXXXXXX">
    <button class="btn" onclick="payMpesa()">Pay with M-Pesa</button>
    
    <hr style="margin:20px 0; border-color:#444;">
    
    <!-- Card Payment -->
    <div id="card-element" style="margin-bottom:20px;"></div>
    <button class="btn" id="card-button">Pay with Card (Visa)</button>
    
    <p id="payment-response"></p>
    <button class="btn" onclick="closePayment()">Close</button>
  </div>
</div>

<!-- GALLERY -->
<section class="gallery">
  <h2>Gallery</h2>
  <div class="gallery-grid">
    <img src="images/icon9.jpg">
    <img src="images/icon10.jpg">
    <img src="images/icon11.jpg">
    <img src="images/icon12.jpg">
    <img src="images/icon13.jpg">
    <img src="images/icon14.jpg">
  </div>
</section>

 <!-- CONTACT SECTION -->
<section id="contact" class="contact-section">

  <h2>CONTACT ME</h2>
  <p>Contact Us</p>

  <form id="contactForm" action="https://formspree.io/f/mzdardwe" method="POST">
    
    <div>
      <label>Full Name *</label>
      <input type="text" name="name" required>
      <div class="error-message"></div>
    </div>

    <div>
      <label>Email *</label>
      <input type="email" name="email" required>
      <div class="error-message"></div>
    </div>

    <div class="full-width">
      <label>Message *</label>
      <textarea name="message" rows="5" required></textarea>
      <div class="error-message"></div>
    </div>

    <button type="submit">Send Message</button>
  </form>

  <!-- Social Links -->
  <div class="social-section">
    <h3>Or find me here</h3>

    <div class="social-links">
      <a href="https://instagram.com/ratata.ke" target="_blank">
        <i class="fab fa-instagram"></i> @ratata.ke
      </a>

      <a href="https://twitter.com/ratata_ke" target="_blank">
        <i class="fab fa-x-twitter"></i> @ratata_ke
      </a>

      <a href="mailto:keynnankoga@gmail.com">
        <i class="fas fa-envelope"></i> keynnankoga@gmail.com
      </a>
    </div>
  </div>

</section>

<!-- FOOTER -->
<footer>
  &copy; 2026 ©KoyoXRatata Store|All rights reserved.
</footer>

<script>
// NAVIGATION
function scrollToHome(){document.getElementById("home").scrollIntoView({behavior:"smooth"})}
function scrollToProducts(){document.getElementById("products").scrollIntoView({behavior:"smooth"})}
function scrollToContact(){document.getElementById("contact").scrollIntoView({behavior:"smooth"})}

// CART
let cart=[];
let total=0;

function addToCart(name,price){
  let existing=cart.find(i=>i.name===name);
  if(existing){ existing.qty++; existing.priceTotal=existing.qty*price; }
  else{ cart.push({name,price,qty:1,priceTotal:price}); }
  updateCart();
  openCart();
}
function updateCart(){
  const cartDiv=document.getElementById("cart-items");
  cartDiv.innerHTML="";
  total=0;
  cart.forEach((item,index)=>{
    total+=item.priceTotal;
    const div=document.createElement("div");
    div.className="cart-item";
    div.innerHTML=`<span>${item.name}</span>
      <span>KSh ${item.price} x <input type="number" value="${item.qty}" min="1" onchange="changeQty(${index},this.value)"> = KSh ${item.priceTotal}</span>`;
    cartDiv.appendChild(div);
  });
  document.getElementById("cart-total").innerText=total;
  document.getElementById("payment-total").innerText=total;
}
function changeQty(index,val){
  val=parseInt(val);
  if(val<1) val=1;
  cart[index].qty=val;
  cart[index].priceTotal=cart[index].price*val;
  updateCart();
}
function openCart(){ document.getElementById("cart-modal").style.display="flex"; }
function closeCart(){ document.getElementById("cart-modal").style.display="none"; }
function openPayment(){ document.getElementById("payment-modal").style.display="flex"; closeCart(); }
function closePayment(){ document.getElementById("payment-modal").style.display="none"; }

// M-PESA PAYMENT
async function payMpesa(){
  const phone=document.getElementById("mpesa-phone").value.trim();
  const response=document.getElementById("payment-response");
  if(!phone||total<=0){ response.innerText="Cart empty or phone missing"; return; }
  response.innerText="Processing M-Pesa payment...";
  try{
    const res=await fetch("/stkpush",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({phone,amount:total})});
    const data=await res.json();
    response.innerText="M-Pesa payment initiated ✔";
    cart=[]; total=0;
    closePayment();
  }catch(err){ response.innerText="Network error"; }
}

// STRIPE CARD PAYMENT
const stripe = Stripe("pk_test_YOUR_STRIPE_PUBLISHABLE_KEY"); // Replace with your key
const elements = stripe.elements();
const cardElement = elements.create("card");
cardElement.mount("#card-element");

document.getElementById("card-button").addEventListener("click", async ()=>{
  if(total<=0){ document.getElementById("payment-response").innerText="Cart is empty"; return; }
  document.getElementById("payment-response").innerText="Processing card payment...";
  try{
    const res=await fetch("/create-payment-intent",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount:total})});
    const data=await res.json();
    const {error, paymentIntent} = await stripe.confirmCardPayment(data.clientSecret,{payment_method:{card:cardElement}});
    if(error) document.getElementById("payment-response").innerText="Card error: "+error.message;
    else if(paymentIntent.status==="succeeded"){ document.getElementById("payment-response").innerText="Card payment successful ✔"; cart=[]; total=0; closePayment(); }
  }catch(err){ document.getElementById("payment-response").innerText="Network error"; }
});
</script>
</body>
</html>